{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport * as echarts from \"echarts\";\n//const d3=require('d3-dsv')\nexport default {\n  data() {\n    return {\n      clusterlist: [{\n        name: \"cc-cc408-hya\",\n        id: 1\n      }, {\n        name: \"cc-cc553-interestPrice\",\n        id: 2\n      }],\n      featurelist: [{\n        name: \"active_shards\",\n        id: 1\n      }, {\n        name: \"health_node\",\n        id: 2\n      }, {\n        name: \"status\",\n        id: 3\n      }],\n      myChart: {},\n      xData: [],\n      yData: [],\n      myChartStyle: {\n        float: \"left\",\n        width: \"100%\",\n        height: \"85%\"\n      },\n      flag: 0,\n      clusterchoose: \"cc-cc408-hya\",\n      featurechoose: \"active_shards\",\n      initialized: 0\n    };\n  },\n  created() {\n    this.Initdata();\n  },\n  mounted() {\n    this.initEcharts();\n  },\n  watch: {\n    flag: function () {\n      this.flag = 0;\n      this.initEcharts();\n    },\n    initialized: function () {\n      this.initEcharts();\n    }\n  },\n  methods: {\n    initEcharts() {\n      const option = {\n        dataZoom: [{\n          type: 'slider',\n          show: true,\n          xAxisIndex: [0],\n          filterMode: 'filter',\n          bottom: 10\n        }],\n        xAxis: [{\n          data: this.xData,\n          type: 'category',\n          //type:\"time\"\n          boundaryGap: false,\n          axisLabel: {\n            color: '#fff',\n            fontSize: 12\n          },\n          axisLine: {\n            show: false\n          },\n          axisTick: {\n            show: false\n          }\n        }],\n        yAxis: {},\n        series: [{\n          data: this.yData,\n          type: \"line\",\n          showSymbol: false,\n          itemStyle: {\n            borderRadius: 30\n          }\n        }],\n        color: [\"rgba(21,75,200,0.9)\"],\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            type: 'line',\n            label: {\n              backgroundColor: '#13205a'\n            }\n          }\n        },\n        grid: {\n          //坐标系设置\n          containLabel: true,\n          left: 0,\n          right: 10,\n          bottom: 0,\n          top: 34,\n          show: true,\n          backgroundColor: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n            offset: 0,\n            color: \"rgba(1,48,87,0.2)\" // 0% 处的颜色\n          }, {\n            offset: 1,\n            color: \"rgba(1,48,87,0.8)\" // 100% 处的颜色\n          }]),\n\n          //背景渐变色\n          borderColor: \"rgba(0,0,0,0)\"\n        }\n      };\n      this.myChart = echarts.init(document.getElementById(\"mychart\"));\n      this.myChart.setOption(option);\n      window.addEventListener(\"resize\", () => {\n        this.myChart.resize();\n      });\n    },\n    ChooseCluster(event) {\n      this.clusterchoose = event.target.value;\n      if (this.featurename != \"\") {\n        this.Changedata();\n      }\n    },\n    ChooseFeature(event) {\n      this.featurechoose = event.target.value;\n      this.Changedata();\n    },\n    Initdata() {\n      const path = 'http://localhost:5000/clusterinfo';\n      axios.get(path, {\n        params: {\n          cluster_name: this.clusterchoose,\n          feature: this.featurechoose\n        }\n      }).then(res => {\n        this.value = res.data;\n        for (var i = 0; i < this.value.length; i++) {\n          this.xData.push(Number(this.value[i].Date));\n          this.yData.push(Number(this.value[i].value));\n          this.initialized = 1;\n        }\n      });\n      ///console.log(11111)\n    },\n\n    Changedata: function () {\n      this.xData = [];\n      this.yData = [];\n      const path = 'http://localhost:5000/clusterinfo';\n      axios.get(path, {\n        params: {\n          cluster_name: this.clusterchoose,\n          feature: this.featurechoose\n        }\n      }).then(res => {\n        this.value = res.data;\n        for (var i = 0; i < this.value.length; i++) {\n          this.xData.push(Number(this.value[i].Date));\n          this.yData.push(Number(this.value[i].value));\n          this.flag = 1;\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","echarts","data","clusterlist","name","id","featurelist","myChart","xData","yData","myChartStyle","float","width","height","flag","clusterchoose","featurechoose","initialized","created","Initdata","mounted","initEcharts","watch","methods","option","dataZoom","type","show","xAxisIndex","filterMode","bottom","xAxis","boundaryGap","axisLabel","color","fontSize","axisLine","axisTick","yAxis","series","showSymbol","itemStyle","borderRadius","tooltip","trigger","axisPointer","label","backgroundColor","grid","containLabel","left","right","top","graphic","LinearGradient","offset","borderColor","init","document","getElementById","setOption","window","addEventListener","resize","ChooseCluster","event","target","value","featurename","Changedata","ChooseFeature","path","get","params","cluster_name","feature","then","res","i","length","push","Number","Date"],"sources":["E:\\SoftwareTest\\BigData_cx2.0_vue布局\\VUE\\client\\src\\components\\ClusterChart.vue"],"sourcesContent":["<template>\r\n    <div class=\"cluster\">\r\n        <div class=\"title1\">集群层面</div> \r\n<select v-model=\"clusterchoose\" style=\"width:100px;height:30px;margin-top:5px;margin-bottom:5px;margin-left:10px\"\r\n            @change=\"ChooseCluster($event)\">\r\n<!--  <option value=\"\">请选择所要展示集群</option>-->\r\n  <option v-for=\"item in clusterlist\" v-bind:key=\"item.id\" v-text=\"item.name\"></option>\r\n</select>\r\n       \r\n<select v-model=\"featurechoose\" style=\"width:100px;height:30px;margin-top:5px;margin-bottom:5px;margin-left:10px\"\r\n          @change=\"ChooseFeature($event)\">\r\n<!--  <option value=\"\">请选择所要展示特征</option>-->\r\n  <option v-for=\"item in featurelist\" v-text=\"item.name\" v-bind:key=\"item.id\"></option>\r\n  </select>\r\n       \r\n  <div class=\"echart\" id=\"mychart\" :style=\"myChartStyle\"></div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from 'axios';\r\nimport * as echarts from \"echarts\";\r\n//const d3=require('d3-dsv')\r\nexport default {\r\n   data(){\r\n    return{\r\n      clusterlist:[{name:\"cc-cc408-hya\",id:1},{name:\"cc-cc553-interestPrice\",id:2}],\r\n      featurelist:[{name:\"active_shards\",id:1},{name:\"health_node\",id:2},{name:\"status\",id:3}],\r\n      myChart:{},\r\n      xData:[],\r\n      yData:[],\r\n      myChartStyle:{float: \"left\", width: \"100%\", height: \"85%\"},\r\n      flag:0,\r\n      clusterchoose:\"cc-cc408-hya\",\r\n      featurechoose:\"active_shards\",\r\n      initialized:0\r\n    }\r\n    },\r\n    created()\r\n    {\r\n       this.Initdata()\r\n    },\r\n    mounted()\r\n    {\r\n        this.initEcharts()\r\n    },\r\n    watch:{\r\n    flag:function()\r\n    {\r\n      this.flag=0\r\n      this.initEcharts();\r\n    },\r\n    initialized:function()\r\n    {\r\n      this.initEcharts()\r\n    }\r\n    },\r\n    methods:{\r\n        initEcharts()\r\n    {\r\n      \r\n      const option={\r\n        dataZoom: [\r\n            {\r\n                type: 'slider',\r\n                show:true ,\r\n                xAxisIndex: [0],\r\n                filterMode: 'filter',\r\n                bottom: 10\r\n            },\r\n        ],\r\n        xAxis:[{\r\n          data: this.xData,\r\n          type: 'category',\r\n          //type:\"time\"\r\n          boundaryGap: false,\r\n          axisLabel: {\r\n              color: '#fff',\r\n              fontSize: 12\r\n          },\r\n          axisLine: {\r\n              show: false\r\n          },\r\n          axisTick: {\r\n              show: false\r\n          }\r\n        }],\r\n        yAxis:{},\r\n        series:[\r\n          {\r\n            data:this.yData,\r\n            type:\"line\",\r\n            showSymbol:false,\r\n            itemStyle: {\r\n                borderRadius: 30,\r\n              },\r\n\r\n          }\r\n        ],\r\n        color: [\"rgba(21,75,200,0.9)\"],\r\n        \r\n        tooltip: {\r\n          trigger: 'axis',\r\n              axisPointer: {\r\n                  type: 'line',\r\n                  label: {\r\n                      backgroundColor: '#13205a'\r\n                  }\r\n              }\r\n        },\r\n      grid: {\r\n        //坐标系设置\r\n        containLabel: true,\r\n        left: 0,\r\n        right: 10,\r\n        bottom: 0,\r\n        top: 34,\r\n        show:true,\r\n        backgroundColor: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\r\n            {\r\n                offset: 0,\r\n                color: \"rgba(1,48,87,0.2)\" // 0% 处的颜色\r\n            },\r\n            {\r\n                offset: 1,\r\n                color: \"rgba(1,48,87,0.8)\" // 100% 处的颜色\r\n            }\r\n        ]), //背景渐变色\r\n        borderColor: \"rgba(0,0,0,0)\"\r\n    }\r\n  }\r\n      \r\n      this.myChart = echarts.init(document.getElementById(\"mychart\"));\r\n      this.myChart.setOption(option);\r\n      window.addEventListener(\"resize\",()=>{\r\n        this.myChart.resize();\r\n      })\r\n    },\r\n     ChooseCluster(event)\r\n    {\r\n        this.clusterchoose=event.target.value\r\n        if(this.featurename!=\"\")\r\n        {\r\n          this.Changedata()\r\n        }\r\n    },\r\n    ChooseFeature(event)\r\n    {\r\n      this.featurechoose=event.target.value\r\n      this.Changedata()\r\n    },\r\n    Initdata()\r\n    {\r\n        const path='http://localhost:5000/clusterinfo';\r\n        axios.get(path,{\r\n             params:{\r\n                cluster_name:this.clusterchoose,\r\n                feature:this.featurechoose\r\n            },\r\n        }).then(res=>{\r\n                this.value=res.data\r\n                for(var i=0;i<this.value.length;i++){\r\n                    this.xData.push(Number(this.value[i].Date))\r\n                    this.yData.push(Number(this.value[i].value))\r\n                    this.initialized=1\r\n                }\r\n        })\r\n        ///console.log(11111)\r\n    },\r\n    Changedata:function()\r\n    {\r\n        this.xData=[]\r\n        this.yData=[]\r\n        const path='http://localhost:5000/clusterinfo';\r\n        axios.get(path,{\r\n             params:{\r\n                cluster_name:this.clusterchoose,\r\n                feature:this.featurechoose\r\n            },\r\n        }).then(res=>{\r\n                this.value=res.data\r\n                for(var i=0;i<this.value.length;i++){\r\n                    this.xData.push(Number(this.value[i].Date))\r\n                    this.yData.push(Number(this.value[i].value))\r\n                    this.flag=1\r\n                }\r\n            })\r\n    }\r\n    }\r\n}\r\n\r\n</script>\r\n\r\n<style>\r\n.cluster{\r\n    height:100%;\r\n}\r\n\r\nselect{\r\n  background-color: rgba(1,1,1,0);\r\n  color: rgb(57, 122, 179);\r\n  border-color: rgba(21,75,140,0.5);\r\n  border-radius: 50px;\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}